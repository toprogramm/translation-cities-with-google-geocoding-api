import googlemaps
import csv
from dotenv import load_dotenv
import os

# Загрузка переменных окружения из .env файла
load_dotenv()

# Получение API ключа из переменных окружения
api_key = os.getenv('GOOGLE_API_KEY')
if not api_key:
    raise ValueError("API key not found in environment variables")

# Инициализация клиента Google Maps
gmaps = googlemaps.Client(key=api_key)
saved_cities = ['Rozaje', 'Zagrad', 'Zabljak', 'Vranj', 'Ulcinj', 'Tuzi', 'Tivat', 'Sutomore', 'Sula', 'Stijena', 'Stari Bar', 'Spuz', 'Savnik', 'Risan', 'Prnjavor', 'Prcanj', 'Podgorica', 'Pluzine', 'Pljevlja', 'Plav', 'Petrovac na Moru', 'Perast', 'Njegusi', 'Niksic', 'Muo', 'Mrcevac', 'Mojkovac', 'Mojanovici', 'Milocani', 'Mataguzi', 'Lipci', 'Kuta', 'Kotor', 'Kolasin', 'Berane', 'Igalo', 'Herceg Novi', 'Gusinje', 'Grbe', 'Goricani', 'Golubovci', 'Ducice', 'Donji Kokoti', 'Donja Lastva', 'Dobrota', 'Dobra Voda', 'Dinosa', 'Denovici', 'Danilovgrad', 'Curilac', 'Cetinje', 'Budva', 'Botun', 'Bijelo Polje', 'Bijelo Polje', 'Bijela', 'Becici', 'Barice', 'Bar', 'Baosici', 'Andrijevica', 'Petnjica', 'Skaljari', 'Susanj', 'Zvecka', 'Zujince', 'Zrenjanin', 'Zitoraga', 'Zitni Potok', 'Zitiste', 'Zemun', 'Zajecar', 'Zagubica', 'Zabari', 'Zabalj', 'Vrsac', 'Vrnjacka Banja', 'Vrbica', 'Vranjska Banja', 'Vranje', 'Vranic', 'Vracar', 'Vojvodinci', 'Vojvoda Stepa', 'Vojka', 'Vlasotince', 'Vlajkovac', 'Vladimirovac', 'Vladicin Han', 'Vilovo', 'Veliko Srediste', 'Veliko Gradiste', 'Veliki Gaj', 'Aleksandrovo', 'Velika Plana', 'Velika Mostanica', 'Velika Greda', 'Varvarin', 'Uzdin', 'Umka', 'Uljma', 'Ugrinovci', 'Ub', 'Tutin', 'Turija', 'Tulare', 'Trstenik', 'Trgoviste', 'Torda', 'Topola', 'Tomasevac', 'Toba', 'Titel', 'Taras', 'Svrljig', 'Svilajnac', 'Suvi Do', 'Sutjeska', 'Surdulica', 'Surduk', 'Surcin', 'Stubline', 'Stepojevac', 'Stari Slankamen', 'Stari Lec', 'Stari Banovci', 'Stara Pazova', 'Stajicevo', 'Srpski Itebej', 'Srpska Crnja', 'Sremcica', 'Spancevac', 'Sopot', 'Soko Banja', 'Smederevska Palanka', 'Smederevo', 'Simanovci', 'Sevica', 'Senta', 'Seleus', 'Sefkerin', 'Secanj', 'Sanad', 'Samos', 'Samoljica', 'Sakule', 'Sajkas', 'Sajan', 'Rusanj', 'Ritisevo', 'Ripanj', 'Rekovac', 'Razanj', 'Ravni Topolovac', 'Rakovica', 'Rajince', 'Radovnica', 'Radojevo', 'Radenka', 'Raca', 'Prokuplje', 'Presevo', 'Pozega', 'Pozarevac', 'Plandiste', 'Pirot', 'Petrovac', 'Perlez', 'Pavlis', 'Paracin', 'Pancevo', 'Padina', 'Padej', 'Ovca', 'Ostruznica', 'Ostojicevo', 'Orlovat', 'Opovo', 'Obrenovac', 'Novo Milosevo', 'Novi Slankamen', 'Novi Pazar', 'Kozjak', 'Novi Kozarci', 'Novi Knezevac', 'Novi Karlovci', 'Novi Itebej', 'Novi Beograd', 'Novi Becej', 'Novi Banovci', 'Nova Pazova', 'Nova Crnja', 'Nis', 'Nikolinci', 'Neuzina', 'Negotin', 'Nakovo', 'Adorjan', 'Mosorin', 'Mol', 'Mokrin', 'Mladenovac', 'Miratovac', 'Mionica', 'Mileticevo', 'Mihajlovo', 'Merosina', 'Melenci', 'Medvega', 'Mega', 'Markovac', 'Margita', 'Malo Crnice', 'Mali Zam', 'Mala Mostanica', 'Majdanpek', 'Lukino Selo', 'Lukicevo', 'Lugavcina', 'Lucani', 'Lokve', 'Lok', 'Ljukovo', 'Ljig', 'Leskovac', 'Lebane', 'Lazarevo', 'Lazarevac', 'Lapovo', 'Lajkovac', 'Kustilj', 'Kursumlija', 'Kupinovo', 'Kupinik', 'Kumane', 'Kucevo', 'Krusevac', 'Krcedin', 'Kraljevo', 'Krajisnik', 'Kragujevac', 'Kovin', 'Kovilj', 'Kovacica', 'Konak', 'Knicanin', 'Klek', 'Kladovo', 'Kikinda', 'Kanjiza', 'Jermenovci', 'Jazovo', 'Jasa Tomic', 'Jarkovac', 'Janosik', 'Jankov Most', 'Jagodina', 'Jablanka', 'Izbiste', 'Ivanjica', 'Ingija', 'Ilandza', 'Idvor', 'Idos', 'Hetin', 'Hajducica', 'Gudurica', 'Grocka', 'Grabovac', 'Gornji Milanovac', 'Gornji Breg', 'Golubinci', 'Golubac', 'Glogovac', 'Gardinovci', 'Gadzin Han', 'Farkazdin', 'Elemir', 'Ecka', 'Durdevo', 'Duboka', 'Donji Milanovac', 'Donja Konjusa', 'Doljevac', 'Dobrica', 'Dobanovci', 'Dimitrovgrad', 'Despotovac', 'Debeljaca', 'Curug', 'Cuprija', 'Cukarica', 'Crna Trava', 'Crna Bara', 'Crepaja', 'Cortanovci', 'Coka', 'Cicevac', 'Cestereg', 'Centa', 'Cacak', 'Bustranje', 'Bujanovac', 'Brezovica', 'Brezovica', 'Botos', 'Bosilegrad', 'Bor', 'Boljevci', 'Boljevac', 'Boka', 'Bojnik', 'Bocar', 'Blace', 'Biljaca', 'Beska', 'Belgrade', 'Beloljin', 'Belo Blato', 'Belegis', 'Bela Palanka', 'Bela Crkva', 'Torak', 'Becmen', 'Becej', 'Batocina', 'Basaid', 'Barice', 'Baric', 'Baranda', 'Barajevo', 'Banatsko Veliko Selo', 'Banatsko Karagorgevo', 'Banatski Karlovac', 'Banatski Dvor', 'Banatski Despotovac', 'Banatska Topola', 'Banatska Dubica', 'Backo Petrovo Selo', 'Backo Gradiste', 'Bace', 'Arilje', 'Arangelovac', 'Aradac', 'Alibunar', 'Aleksinac', 'Aleksandrovac', 'Ada', 'Raska', 'Niska Banja', 'Sokolovica', 'Rusko Selo', 'Vozdovac', 'Zvezdara', 'Prislonica', 'Knic', 'Donja Gorevnica', 'Savski Venac', 'Palilula', 'Stari Grad', 'Zminjak', 'Zmajevo', 'Zasavica Prva', 'Vrdnik', 'Vrbas', 'Vladimirci', 'Visnjicevo', 'Veternik', 'Varna', 'Valjevo', 'Uzvece', 'Uzice', 'Trsic', 'Temerin', 'Tekeris', 'Tabanovic', 'Subotica', 'Stitar', 'Stepanovicevo', 'Stanisic', 'Sremski Karlovci', 'Sremska Raca', 'Sremska Mitrovica', 'Srbobran', 'Sonta', 'Sombor', 'Sjenica', 'Sinosevic', 'Sid', 'Sevarice', 'Sasinci', 'Salas Nocajski', 'Salas Crnobarski', 'Sabac', 'Rumenka', 'Ruma', 'Rigica', 'Ribari', 'Ravno Selo', 'Ravnje', 'Radenkovic', 'Putinci', 'Prnjavor', 'Prijepolje', 'Prigrevica', 'Priboj', 'Platicevo', 'Petrovaradin', 'Petkovica', 'Pecinci', 'Osecina', 'Odzaci', 'Obrovac', 'Novo Selo', 'Novi Sad', 'Nova Varos', 'Nikinci', 'Nakucani', 'Mrovska', 'Mokra Gora', 'Metkovic', 'Mali Zvornik', 'Mali Igos', 'Majur', 'Maglic', 'Macvanska Mitrovica', 'Ljubovija', 'Lipolist', 'Lipnicki Sor', 'Lesnica', 'Kupusina', 'Kulpin', 'Kula', 'Krupanj', 'Krivaja', 'Kozjak', 'Kosjeric', 'Kolut', 'Koceljeva', 'Klenje', 'Klenak', 'Kisac', 'Kamenica', 'Joseva', 'Jevremovac', 'Jelenca', 'Jarebice', 'Jarak', 'Jadranska Lesnica', 'Irig', 'Hrtkovci', 'Grncara', 'Grabovci', 'Gornji Dobric', 'Gornje Nedeljice', 'Gornja Bukovica', 'Glusci', 'Glozan', 'Glogovac', 'Gakovo', 'Dublje', 'Drenovac', 'Draginje', 'Doroslovo', 'Donji Dobric', 'Donja Badanja', 'Dobric', 'Despotovo', 'Culjkovic', 'Crna Bara', 'Cokesina', 'Celarevo', 'Cajetina', 'Bukor', 'Buganovci', 'Brdarica', 'Bosut', 'Bogosavac', 'Bogojevo', 'Bogatic', 'Beocin', 'Belotic', 'Banovo Polje', 'Bajina Basta', 'Badovinci', 'Backi Petrovac', 'Backi Breg', 'Backa Topola', 'Backa Palanka', 'Bac', 'Apatin', 'Pocerski Pricinovic', 'Durici', 'Zlatibor', 'Sokolovo Brdo', 'Osjecenik', 'Rumska', 'Knjazevac', 'Kriva Feja', 'Sumulice', 'Lagja e Poshtme', 'Lagja e Ternovcalive', 'Lagja e Korbajve', 'Lagja e Shimshirve', 'Dolac naselje', 'Irig']
# Ваш список городов
cities = ['Rozaje', 'Zagrad', 'Zabljak']

# Открываем CSV файл для записи
with open('cities_translate.csv', 'w', newline='', encoding='utf-8') as csvfile:
    csvwriter = csv.writer(csvfile)
    # Записываем заголовок
    csvwriter.writerow(['Original City English Name', 'Google Russian Translated City'])
    
    # Проверка городов
    for city in cities:
        geocode_result = gmaps.geocode(city, language='ru')
        if geocode_result:
            # Получаем название города на русском языке из геокодирования
            correct_name = geocode_result[0]['address_components'][0]['long_name']
            csvwriter.writerow([city, correct_name])
            print(f"{city} -> {correct_name}")
        else:
            csvwriter.writerow([city, 'Не найдено'])
            print(f"{city} не найдено")
